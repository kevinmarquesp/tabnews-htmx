<!DOCTYPE html>
<html lang="pt-br">
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">

		<title>Tabnews Frontend With HTMX</title>

		<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
		<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
		<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">

		<script src="https://unpkg.com/htmx.org@1.9.11"></script>
		<script src="https://unpkg.com/htmx.org@1.9.11/dist/ext/client-side-templates.js"></script>
		<script src="https://unpkg.com/mustache@latest"></script>
	</head>
	<body hx-ext="client-side-templates" class="p-5">

		<div
			hx-get="https://corsproxy.io/?https://www.tabnews.com.br/api/v1/contents?page=1&per_page=10&strategy=relevant"
			hx-swap="innerHTML"
			hx-target="this"
			hx-trigger="load"
			mustache-array-template="mtt-card"
		></div>

		<template id="mtt-card">
			{{#data}}
				<div>
					<div class="shadow mb-4 d-inline-block rounded-3 border px-3 py-2">
						<a
							href="#"
							class="fs-5 lh-0 text-dark link-underline-dark link-underline-opacity-0 link-underline-opacity-75-hover"
							hx-get="https://corsproxy.io/?https://www.tabnews.com.br/api/v1/contents/{{owner_username}}/{{slug}}"
							hx-target="next .article"
							mustache-array-template="mtt-article"
						>{{title}}</a>

						<div class="article"></div>

						<footer class="my-2 text-secondary align-items-center">
							<small class="d-flex gap-4">
								<a
									href="https://www.tabnews.com.br/{{owner_username}}"
									target="_blank"
									class="fs-6 lh-1 text-secondary link-underline-secondary link-underline-opacity-0 link-underline-opacity-75-hover link-offset-2"
								>{{owner_username}}</a>
								<span><i class="bi bi-chat-dots"></i> {{children_deep_count}}</span>
								<span><i class="bi bi-arrow-up"></i> {{tabcoins_credit}}</span>
								<span><i class="bi bi-arrow-down"></i> {{tabcoins_debit}}</span>
								<span><i class="bi bi-coin"></i> {{tabcoins}}</span>
								<span class="fst-italic opacity-50 mx-3">{{published_at}}</span>
							</small>
						</footer>
					</div>
				</div>
			{{/data}}
		</template>

		<template id="mtt-article">
			{{#data}}
				<pre
					style="white-space: pre-wrap; max-width: 90ch;"
					class="mb-4 mt-2 mx-5"
				>{{body}}</pre>
			{{/data}}
		</template>

	</body>
</html>
